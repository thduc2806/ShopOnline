@using System.Security.Claims
<!doctype html>
<html lang="en">
@{
    string userId = string.Empty;
    if(User.Identity.IsAuthenticated)
    {
        if (User.Identity.IsAuthenticated)
        {
            var user = User.FindFirst(ClaimTypes.NameIdentifier);
            userId = user.Value.ToString();
        };
    }
}
<head>
    <meta charset="utf-8">
    <title>Rokon - Shop Left Sidebar</title>
    <meta name="description" content="Morden Bootstrap HTML5 Template">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="~/images/favicon.ico">

    <!-- ======= All CSS Plugins here ======== -->
    <link rel="stylesheet" href="~/css/swiper-bundle.min.css">
    <link rel="stylesheet" href="~/css/glightbox.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800&family=Work+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">

    <!-- Plugin css -->
    <link rel="stylesheet" href="~/css/bootstrap.min.css">

    <!-- Custom Style CSS -->
    <link rel="stylesheet" href="~/css/style.css">
</head>

<body>

    <!-- Start preloader -->
    <div id="preloader">
        <div id="ctn-preloader" class="ctn-preloader">
            <div class="animation-preloader">
                <div class="spinner"></div>
                <div class="txt-loading">
                    <span data-text-preloader="L" class="letters-loading">
                        L
                    </span>

                    <span data-text-preloader="O" class="letters-loading">
                        O
                    </span>

                    <span data-text-preloader="A" class="letters-loading">
                        A
                    </span>

                    <span data-text-preloader="D" class="letters-loading">
                        D
                    </span>

                    <span data-text-preloader="I" class="letters-loading">
                        I
                    </span>

                    <span data-text-preloader="N" class="letters-loading">
                        N
                    </span>

                    <span data-text-preloader="G" class="letters-loading">
                        G
                    </span>
                </div>
            </div>

            <div class="loader-section section-left"></div>
            <div class="loader-section section-right"></div>
        </div>
    </div>
    <!-- End preloader -->
    <!-- Start header area -->
    <header class="header__section">
        <!-- Start Header topbar -->
        @await Component.InvokeAsync("TopBar")
        <!-- Start Header topbar -->
        <!-- Start main header -->
        @await Component.InvokeAsync("NavBar")
        <!-- End main header -->
        <!-- Start Offcanvas header menu -->
        @await Component.InvokeAsync("NavBarMedia")
        <!-- End Offcanvas header menu -->
        <!-- Start Offcanvas stikcy toolbar -->
        @await Component.InvokeAsync("ToolBar")
        <!-- End Offcanvas stikcy toolbar -->
        <!-- Start offCanvas minicart -->
        <!-- End offCanvas minicart -->
        <!-- Start serch box area -->
        <!-- End serch box area -->
    </header>
    <!-- End header area -->
    @RenderBody()

    <!-- Start footer section -->
    @await Component.InvokeAsync("Footer")
    <!-- End footer section -->
    <!-- Quickview Wrapper -->
    <!-- Quickview Wrapper End -->
    <!-- Scroll top bar -->
    <button id="scroll__top"><svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="48" d="M112 244l144-144 144 144M256 120v292" /></svg></button>

    <!-- All Script JS Plugins here  -->
    <script src="~/js/popper.js" defer="defer"></script>
    <script src="~/js/bootstrap.min.js" defer="defer"></script>

    <script src="~/js/swiper-bundle.min.js" defer="defer"></script>
    <script src="~/js/glightbox.min.js" defer="defer"></script>
    <script src="~/lib/jquery/dist/jquery.min.js" ></script>

    <!-- Customscript js -->
    <script src="~/js/script.js" defer="defer"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $.ajax({
                url: 'https://localhost:5001/api/Cart/TotalItem',
                type: 'GET',
                data: {
                    'userId': '@userId',
                },
                success: function (result) {
                    $("#totalProductCount").text(result)
                }
            });
        });
    </script>

</body>
</html>
